/**
 * Proton2025 Theme - Translations
 * Локализация для JavaScript компонентов темы
 */

window.ProtonTranslations = {
  ru: {
    // Services Widget - Header
    "Services Monitor": "Мониторинг сервисов",
    "Widget Settings": "Настройки виджетов",
    "Add Service": "Добавить сервис",
    Services: "Сервисы",
    Widgets: "Виджеты",
    Ready: "Готов",

    // Empty state
    "Click ⚙ to add services": "Нажмите ⚙ для добавления сервисов",

    // Categories
    "My Services": "Мои сервисы",
    Network: "Сеть",
    Security: "Безопасность",
    VPN: "VPN",
    "Ad Blocking": "Блокировка рекламы",
    System: "Система",
    Other: "Другое",

    // Service descriptions
    "DNS and DHCP server": "DNS и DHCP сервер",
    Firewall: "Межсетевой экран",
    "Network interfaces": "Сетевые интерфейсы",
    "LuCI web server": "Веб-сервер LuCI",
    "DHCPv6 server": "DHCPv6 сервер",
    "SSH access": "SSH доступ",
    "Time sync": "Синхронизация времени",
    "Task scheduler": "Планировщик задач",
    "VPN service": "VPN сервис",
    "Ad blocking": "Блокировка рекламы",
    "System service": "Системный сервис",

    // Status (uppercase - for badges)
    RUNNING: "РАБОТАЕТ",
    STOPPED: "ОСТАНОВЛЕН",
    UNKNOWN: "НЕИЗВЕСТНО",

    // Status (capitalized - for logs)
    Running: "Работает",
    Stopped: "Остановлен",
    Error: "Ошибка",
    Unknown: "Неизвестно",
    "Checking...": "Проверка...",

    // Actions
    Start: "Запустить",
    Stop: "Остановить",
    Restart: "Перезапустить",
    Enable: "Включить",
    Disable: "Отключить",
    Remove: "Убрать",
    Cancel: "Отмена",
    Add: "Добавить",
    Close: "Закрыть",
    Reset: "Сброс",

    // Modal - service list
    "Available services": "Доступные сервисы",
    "Selected services": "Выбранные сервисы",
    "Search services...": "Поиск сервисов...",
    "Search or add custom service...": "Поиск или добавление сервиса...",
    Search: "Поиск",
    "Opening service list...": "Открытие списка сервисов...",
    "Custom service name": "Имя сервиса",
    "Enter custom service name...": "Введите имя сервиса...",
    "Add custom service": "Добавить свой сервис",
    "No services found": "Сервисы не найдены",
    "Service not found in system": "Сервис не найден в системе",
    "as custom": "как свой",
    "Or press Enter": "Или нажмите Enter",
    "already added": "уже добавлен",
    custom: "свой",

    // Modal - validation
    "Letters, numbers, dash, underscore only":
      "Только буквы, цифры, дефис, подчёркивание",
    "Name too long (max 64 chars)": "Имя слишком длинное (макс. 64 символа)",
    "Invalid characters! Use: a-z, 0-9, -, _":
      "Недопустимые символы! Используйте: a-z, 0-9, -, _",
    "Already in your list": "Уже в вашем списке",
    "Found in system": "Найден в системе",
    "Custom service (not found in system)":
      "Пользовательский сервис (не найден в системе)",
    "Added successfully!": "Успешно добавлено!",
    "Not installed": "Не установлен",
    Added: "Добавлено",
    Removed: "Удалено",

    // Loading states
    "Waiting for LuCI API...": "Ожидание LuCI API...",
    "Loading...": "Загрузка...",
    "Loading services...": "Загрузка сервисов...",
    "Checking services...": "Проверка сервисов...",
    "Services loaded": "Сервисы загружены",
    "Check complete": "Проверка завершена",

    // init.d
    "init.d services": "Сервисы init.d",
    "Warning: init.d list empty": "Внимание: список init.d пуст",

    // Messages
    "Service started": "Сервис запущен",
    "Service stopped": "Сервис остановлен",
    "Service restarted": "Сервис перезапущен",
    "Service enabled": "Сервис включён",
    "Service disabled": "Сервис отключён",
    Success: "Успешно",

    // Empty state
    "No services selected": "Сервисы не выбраны",
    "Click + to add services": "Нажмите + чтобы добавить",

    // Theme Settings
    "Proton2025 Theme Settings": "Настройки темы Proton2025",
    "Theme Mode": "Режим темы",
    Dark: "Тёмный",
    Light: "Светлый",
    "Choose light or dark theme": "Выберите светлую или тёмную тему",
    "Accent Color": "Акцентный цвет",
    "Choose theme accent color": "Выберите акцентный цвет темы",
    Blue: "Синий",
    Purple: "Фиолетовый",
    Green: "Зелёный",
    Orange: "Оранжевый",
    Red: "Красный",
    Default: "По умолчанию",
    "Border Radius": "Скругление углов",
    "Corner rounding style": "Стиль скругления углов",
    Sharp: "Острые",
    Rounded: "Скруглённые",
    "Extra Rounded": "Сильно скруглённые",
    Zoom: "Масштаб",
    "Interface scale": "Масштаб интерфейса",
    Animations: "Анимации",
    "Enable smooth transitions and effects":
      "Включить плавные переходы и эффекты",
    Transparency: "Прозрачность",
    "Enable blur and transparency effects":
      "Включить эффекты размытия и прозрачности",
    "Services Widget": "Виджет сервисов",
    "Show services monitor on Overview page":
      "Показывать монитор сервисов на странице обзора",
    "Temperature Widget": "Виджет температуры",
    "Show temperature monitor on Overview page":
      "Показывать монитор температуры на странице обзора",
    "Temperature widget enabled. Visit Status → Overview to see it.":
      "Виджет температуры включён. Перейдите в Статус → Обзор, чтобы увидеть его.",
    "Temperature widget disabled.": "Виджет температуры отключён.",
    "Group Services": "Группировать сервисы",
    "Group services by category in widget":
      "Группировать сервисы по категориям в виджете",
    "Widget Log": "Лог виджета",
    "Show activity log under the widget":
      "Показывать лог активности под виджетом",
    "Services widget enabled. Visit Status → Overview to see it.":
      "Виджет сервисов включён. Перейдите в Статус → Обзор, чтобы увидеть его.",
    "Services widget disabled.": "Виджет сервисов отключён.",
    "Services grouping enabled.": "Группировка сервисов включена.",
    "Services grouping disabled.": "Группировка сервисов отключена.",

    // Load Average
    "1 min": "1 мин",
    "5 min": "5 мин",
    "15 min": "15 мин",
    "1 MIN": "1 МИН",
    "5 MIN": "5 МИН",
    "15 MIN": "15 МИН",
    "System Load Average": "Средняя нагрузка системы",
    "Load Average": "Средняя нагрузка",
    "Shows the average number of processes waiting for CPU execution. Three values represent the last 1, 5, and 15 minutes.":
      "Показывает количество процессов, ожидающих выполнения процессором. Три значения — за последние 1, 5 и 15 минут.",
    "Low load": "Низкая нагрузка",
    "Medium load": "Средняя нагрузка",
    "High load": "Высокая нагрузка",
    cores: "ядра",

    // Footer
    "Powered by": "Работает на",

    // Temperature Widget
    Temperature: "Температура",
    "Temperature Monitor": "Мониторинг температуры",
    "No temperature sensors found": "Датчики температуры не найдены",
    CPU: "Процессор",
    SoC: "SoC",
    WiFi: "WiFi",
    DDR: "DDR",
    Board: "Плата",
    Normal: "Норма",
    Warm: "Тепло",
    Hot: "Горячо",
    Critical: "Критично",
    "Temperature normal": "Температура в норме",
    "Temperature elevated": "Температура повышена",
    "Temperature high": "Высокая температура",
    "Temperature critical": "Критическая температура",
    Sensor: "Датчик",
    Current: "Текущая",
    Peak: "Пик",
    "Thermal sensors monitoring. Colors indicate: green - normal, yellow - warm, orange - hot, red - critical.":
      "Мониторинг термодатчиков. Цвета означают: зелёный — норма, жёлтый — тепло, оранжевый — горячо, красный — критично.",
  },

  // Добавьте другие языки по аналогии:
  // uk: { ... },
  // de: { ... },
};

/**
 * Функция перевода для использования в любом JS
 * @param {string} key - Ключ перевода (английский текст)
 * @returns {string} - Переведённый текст или оригинал
 */
window.protonT = function (key) {
  // Кэшируем определение языка для производительности
  if (!window._protonLangCache) {
    let lang = "en";

    // 1. Проверяем data-lang атрибут body (самый надёжный способ!)
    if (document.body && document.body.dataset && document.body.dataset.lang) {
      lang = document.body.dataset.lang;
    }
    // 2. Проверяем класс body lang_XX
    else if (document.body && document.body.className) {
      const langMatch = document.body.className.match(/\blang_([a-z]{2})\b/i);
      if (langMatch) {
        lang = langMatch[1];
      }
    }
    // 3. HTML атрибут lang
    else if (document.documentElement) {
      const htmlLang =
        document.documentElement.lang ||
        document.documentElement.getAttribute("lang");
      if (htmlLang && htmlLang !== "en") {
        lang = htmlLang;
      }
    }
    // 4. Ищем скрипт переводов LuCI
    // LuCI загружает /cgi-bin/luci/admin/translations/ru
    if (lang === "en") {
      const scripts = document.querySelectorAll(
        'script[src*="/translations/"]'
      );
      for (const script of scripts) {
        const match = script.src.match(/\/translations\/([a-z]{2})(?:\?|$)/i);
        if (match) {
          lang = match[1];
          break;
        }
      }
    }
    // 5. Проверяем LuCI L.tr - если есть русский перевод стандартной строки
    if (lang === "en" && window.L && typeof window.L.tr === "function") {
      try {
        const testTranslation = window.L.tr("Save");
        if (testTranslation === "Сохранить") lang = "ru";
        else if (testTranslation === "Speichern") lang = "de";
        else if (testTranslation === "Зберегти") lang = "uk";
      } catch (e) {
        // Игнорируем ошибки
      }
    }
    // 6. Meta тег
    if (lang === "en") {
      const metaLang = document.querySelector('meta[name="language"]')?.content;
      if (metaLang) lang = metaLang;
    }

    // Нормализуем язык (ru-RU -> ru, ru_RU -> ru)
    const langBase = lang.split("-")[0].split("_")[0].toLowerCase();
    window._protonLangCache = langBase;
  }

  const langBase = window._protonLangCache;

  if (
    window.ProtonTranslations &&
    window.ProtonTranslations[langBase] &&
    window.ProtonTranslations[langBase][key]
  ) {
    return window.ProtonTranslations[langBase][key];
  }

  return key;
};
